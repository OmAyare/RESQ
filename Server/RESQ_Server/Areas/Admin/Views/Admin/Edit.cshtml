@model RESQ_Server.Models.User

@{
    ViewBag.Title = "Edit User";
    Layout = "~/Areas/Admin/Views/Shared/_Layout1.cshtml";
}

<h2 class="text-primary mb-4">Edit User</h2>

@using (Html.BeginForm("Edit", "Admin", FormMethod.Post, new { enctype = "multipart/form-data", @class = "container-fluid px-4" }))
{
    @Html.AntiForgeryToken()
    @Html.HiddenFor(m => m.User_id)

    <div class="row g-4">
        <!-- Column 1 -->
        <div class="col-lg-6">
            @Html.LabelFor(m => m.Username)
            @Html.TextBoxFor(m => m.Username, new { @class = "form-control" })
            @Html.ValidationMessageFor(m => m.Username, "", new { @class = "text-danger" })

            @Html.LabelFor(m => m.Email)
            @Html.TextBoxFor(m => m.Email, new { @class = "form-control" })

            @Html.LabelFor(m => m.FullName)
            @Html.TextBoxFor(m => m.FullName, new { @class = "form-control" })

            @Html.LabelFor(m => m.FatherName)
            @Html.TextBoxFor(m => m.FatherName, new { @class = "form-control" })

            @Html.LabelFor(m => m.MotherName)
            @Html.TextBoxFor(m => m.MotherName, new { @class = "form-control" })

            @Html.LabelFor(m => m.Branch)
            @Html.TextBoxFor(m => m.Branch, new { @class = "form-control" })

            @Html.LabelFor(m => m.Gender)
            @Html.DropDownListFor(m => m.Gender, new SelectList(new[] { "Male", "Female", "Other" }, Model.Gender), "Select", new { @class = "form-select" })

            @Html.LabelFor(m => m.Role_id)
            @Html.DropDownListFor(m => m.Role_id, (SelectList)ViewBag.RoleList, "Select Role", new { @class = "form-select" })

            @Html.LabelFor(m => m.BankAccount_2)
            @Html.TextBoxFor(m => m.BankAccount_2, new { @class = "form-control" })

            @Html.LabelFor(m => m.BankAccount_1)
            @Html.TextBoxFor(m => m.BankAccount_1, new { @class = "form-control" })

        </div>

        <!-- Column 2 -->
        <div class="col-lg-6">
            <label for="DateOfBirth">Date of Birth</label>
            <input type="date" name="DateOfBirth" class="form-control" value="@(Model.DateOfBirth?.ToString("yyyy-MM-dd"))" />

            <label for="JoiningDate">Joining Date</label>
            <input type="date" name="JoiningDate" class="form-control" value="@(Model.JoiningDate?.ToString("yyyy-MM-dd"))" />

            @Html.LabelFor(m => m.AadharNumber)
            @Html.TextBoxFor(m => m.AadharNumber, new { @class = "form-control" })

            @Html.LabelFor(m => m.UANNumber)
            @Html.TextBoxFor(m => m.UANNumber, new { @class = "form-control" })

            @Html.LabelFor(m => m.BloodGroup)
            @Html.TextBoxFor(m => m.BloodGroup, new { @class = "form-control" })

            @Html.LabelFor(m => m.PhoneNumber)
            @Html.TextBoxFor(m => m.PhoneNumber, new { @class = "form-control" })

            @Html.LabelFor(m => m.Password)
            @Html.TextBoxFor(m => m.Password, new { @class = "form-control" })

            @Html.Label("Upload Photo (JPG/PNG/GIF)")
            <input type="file" name="UploadPhoto" class="form-control" accept=".jpg,.jpeg,.png,.gif" />
            @if (!string.IsNullOrEmpty(Model.Employee_Photo))
            {
                <p>Current Photo:</p>
                <img src="@Url.Content("~/EmployeePhotos/" + Model.Employee_Photo)" width="100" />
            }
        </div>

        <!-- Submit -->
        <div class="col-12 mt-3">
            <button type="submit" class="btn btn-primary">Save Changes</button>
            @Html.ActionLink("Back to Users", "User", "Admin", null, new { @class = "btn btn-outline-secondary ms-2" })
        </div>
    </div>
}
